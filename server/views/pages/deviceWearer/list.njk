{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% extends "../../partials/layout.njk" %}

{% set pageTitle = applicationName + " - Home" %}
{% set mainClasses = "app-container govuk-body" %}

{% set rows = [] %}

{% for deviceWearer in deviceWearers %}
    {% set rows = (rows.push([
      {
        text: deviceWearer.deviceWearerId
      },
      {
        text: deviceWearer.firstName
      },
      {
        text: deviceWearer.lastName
      },
      {
        text: deviceWearer.type
      },
      {
        html: '<a href="/device-wearers/id/' + deviceWearer.deviceWearerId + '">View</a>'
      }
    ]), rows) %}
{% endfor %}

{% block beforeContent %}
  {{ super() }}
  {{ govukBackLink({ href: "/", text: "Back" }) }}
{% endblock %}

{% block content %}

  <h1>Device Wearers</h1>

  {%if isError %}

    {{ govukErrorSummary({
      titleText: "There is a problem",
      errorList: [
        {
          text: "Could not fetch data from remote API",
          href: "#"
        }
      ]
    }) }}

  {% endif %}

  {{ govukTable({
    captionClasses: "govuk-table__caption--l",
    firstCellIsHeader: true,
    head: [
      {
        text: "Device Wearer ID"
      },
      {
        text: "First Name"
      },
      {
        text: "Last Name"
      },
      {
        text: "Type"
      },
      {
        text: "Actions"
      }
    ],
    rows: rows
  }) }}

{% endblock %}
